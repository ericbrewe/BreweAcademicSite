<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>R For SNA</title>
    <meta charset="utf-8" />
    <meta name="author" content="Eric Brewe   Associate Professor of Physics at Drexel University" />
    <link href="RForSNA_WS1_files/remark-css/default.css" rel="stylesheet" />
    <link href="RForSNA_WS1_files/remark-css/metropolis.css" rel="stylesheet" />
    <link rel="stylesheet" href="BreweSlides.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# R For SNA
## Workshop 1
### Eric Brewe <br> Associate Professor of Physics at Drexel University <br>
### 4 August 2020, last update: 2020-07-29

---




# Why shouldn't I just use Excel?

- R is a programming language
  - Data live separate from analysis (this is good)
  - Data are imported, manipulated, represented, but not changed.
    - This means you can't screw up!
--

.center[Or at least it is hard to screw up

#ðŸ¤·]

---
# R is good for... 

- Data cleaning
- Plotting
- Summarizing
- Manipulating data
- Reproducibility
- Sharing Code

---
class: center, middle

# Foundations of Network Analysis

---
# What is a network?
.pull-left[
- Collection of *object-like* things that are connected.
    - Nodes/actors = Object-like things (Nouns)
        - Students in a class, Words in a novel, Banks...
        - Nodes can have attributes 
            - Gender, 
            - Word-type,
            - Market capitialization
]


.pull-right[
![NetworkImage](https://cdn.journals.aps.org/journals/PRPER/key_images/10.1103/PhysRevPhysEducRes.15.020150.png)


]
---
# What is a network?
.pull-left[
- Collection of *object-like* things that are connected.
    - Ties/Links/Edges = Connections between nodes (Verbs)
        - Talked to each other, Are neigbors, Lend money, Sent text message...
            - Directional
            - Multiplex
            - Weighted
]


.pull-right[
![NetworkImage](https://cdn.journals.aps.org/journals/PRPER/key_images/10.1103/PhysRevPhysEducRes.15.020150.png)


]
---
# Network Analysis is for the analysis of *relational data*

There are four basic assumptions:

1. Nodes and interactions are interdependent*
2. Edges allow flow between nodes
3. Network models on indiviuals both constrain and provide opportunity for action
4. Network models conceptualize structure as representation of lasting patterns of relations between actors

.footnote[
\* Violates basic assumption of inferential statistics

Wasserman, S., Faust, K. (1994). Social network analysis: Methods and applications (Vol. 8). Cambridge university press.
]
---
# What can we do with it?

.pull-left[
### Ego-Level Analyses

- What can we know about the network of one person?
    - Ego density
    - Number of neighbors
    - Number of connected neighbors
]

.pull-right[

![](img/ParisiEgoNet.png)
]
---

# What can we do with it?

.pull-left[
### Node-Level Analyses

- What can we know about the position of people in a network?
    - Degree (In/Out/Total)
    - Geodesic Distance (Kevin Bacon)
    - PageRank
    - Target Entropy
]

.pull-right[

![](img/PERGraph.png)
]
---

# What can we do with it?

.pull-left[
### Whole Network Analyses

- What can we say about a whole network?
    - Density, Average path length, Giant component
    - Clustering
    - Homophily
    - Modeling
        - Block models
        - Small worldness
]

.pull-right[

![](img/MapEqn.png)]
---


# Historical Foundations

.pull-left[

Joseph Moreno &amp; Helen Hall Jennings (1932)
- Established foundations of SNA

Quantitative Sociology/Anthropology
- Davis Southern Women's Club (1941)
- Small World Problem (1967)
- Zachary's Karate Club (1977)

Seminal Articles
- Milgram, Stanley "The small world problem" Psychology Today 2:1, (1967)
- Grannovetter, Mark S. "The strength of weak ties" American Journal of Sociology (1973)
]

.pull-right[

![](img/JosephMoreno.jpg)]
---
# Modern Foundations of Network Analysis


### Sociophysics (1990s)

- Graph theory
- Information theory
- Computing 
- Used to study
    - Internet
    - Power grid
    - Transportation networks

Seminal Articles
- Watts &amp; Strogratz "Collective dynamics of small world networks" Nature (1998)
- Page, Brin, Motwani, &amp; Winograd "The PageRank citation ranking: Bringing order to the web" Stanford InfoLab (1999)

---
# Important Takeaways from History
.center[Two main camps

--

Statistical -&gt; hypothesis testing

--

Graph theoretic -&gt; network models and simulation]
 
--

.font200.center[
They often don't agree.

There is often distain.

They have different language, journals, conferences
]]
---
# Network Data in R

.center[
## Sociomatrix/Adjacency Matrix
]
.pull-left[
![](RForSNA_WS1_files/figure-html/ToyNet-1.png)&lt;!-- --&gt;
]

.pull-right[

```
## 5 x 5 sparse Matrix of class "dgCMatrix"
##               
## [1,] . 1 1 1 1
## [2,] 1 . . . .
## [3,] 1 . . . .
## [4,] 1 . . . 1
## [5,] 1 . . 1 .
```
]

---
# Network Data in R

.center[
## Edgelist
]
.pull-left[
![](RForSNA_WS1_files/figure-html/PlotToyNet-1.png)&lt;!-- --&gt;
]

.pull-right[

```
## [[1]]
## + 4/5 edges from 4f1c792:
## [1] 1--2 1--3 1--4 1--5
## 
## [[2]]
## + 1/5 edge from 4f1c792:
## [1] 1--2
## 
## [[3]]
## + 1/5 edge from 4f1c792:
## [1] 1--3
## 
## [[4]]
## + 2/5 edges from 4f1c792:
## [1] 1--4 4--5
## 
## [[5]]
## + 2/5 edges from 4f1c792:
## [1] 1--5 4--5
```
]

---

# What does this mean in terms of learning R?

- We need to know something about the different types of data!

.pull-left[

#### Data types (at least some of them)

- **Logical** (T/F, 1/0)
- **Integers** (whole numbers)
- **Numeric** (numbers with decimal places)
- **Complex** (I never use these)
]

.pull-right[
#### Data storage (at least some of them)

- **Vectors** = long columns of data (can be any type, but only one type of data)
- **Dataframes** = like Excel pages (columns can hold different types of data)
- **Matrices** = like dataframes, but they have named rows/columns 
    - Adjacency Matrices are of type matrix.
- **Lists** = the junkdrawer, can hold any type of data (including dataframes or matrices)
    - in igraph, networks are stored as lists.

]
---
# What you need to know about R?

- R is the programming language.
- RStudio is the Integrated Development Environment (IDE)
- Packages: groups of functions that are developed as open source 
- Base R
    - The group of packages preloaded into R
- Tidyverse
    - Family of packages that are designed with the theory that programming should be readable by humans.
- igraph
    - Package that is very useful for doing network analyses


.font190[.center[Lets do this!]]


---
# Using R and RStudio

.pull-left[
- Open RStudio (this will automatically open R)
- Navigate to your folder titled "RForSNA"
- In RStudio -&gt; File -&gt; New Project
    - Select "Existing Directory" (Unless you know Git)
- In RStudio -&gt; File -&gt; New File -&gt; RMarkdown
- Save this file in the folder titled "RForSNA"
]
.pull-right[
![](img/NewProject.png)
![](img/NewRMarkdown.png)
]
---

# Lets Take a Tour of RStudio IDE

---

# Let's Install Some Packages
.font150[You'll only need to do this once.]

## In Console

To install tidyverse package...


```r
install.packages("tidyverse")
```

Repeat this with the following packages:

igraph    tidygraph     here     ggraph

---

# Let's Load Some Packages
.font150[You'll need to do this every time you restart R.]

## In Console

To load tidyverse package...


```r
library(tidyverse) #tools for cleaning data 
library(igraph)  #package for doing network analysis
library(tidygraph) #tools for doing tidy networks
library(here) #tools for project-based workflow
library(ggraph) #plotting tools for networks
```

--

Once you have done this, you will want to put include a code chunk with all of your libraries into your markdown document so that you don't have to type this every time. 

---
# Let's get data into R. 

I've sent you a csv file that includes the data for workshop 1, I hope you saved this in your folder titled "data". 

If you have loaded the package "here" this should just work.  If you have not loaded the "here" package you will need to set the working directory. 

Again, you will want to include this as a code chunk in your RMD file.  


```r
#This loads the csv and saves it as a dataframe titled WorkshopData

WorkshopData &lt;- read_csv(here("data", "DataForWorkshop1.csv"))
```


---
# Let's have a look at the data


```r
glimpse(WorkshopData)
```

```
## Rows: 4
## Columns: 23
## $ StartDate               &lt;chr&gt; "Start Date", "{\"ImportId\":\"startDate\",\"timeZone\â€¦
## $ EndDate                 &lt;chr&gt; "End Date", "{\"ImportId\":\"endDate\",\"timeZone\":\"â€¦
## $ Status                  &lt;chr&gt; "Response Type", "{\"ImportId\":\"status\"}", "Survey â€¦
## $ IPAddress               &lt;chr&gt; "IP Address", "{\"ImportId\":\"ipAddress\"}", NA, NA
## $ Progress                &lt;chr&gt; "Progress", "{\"ImportId\":\"progress\"}", "100", "100"
## $ `Duration (in seconds)` &lt;chr&gt; "Duration (in seconds)", "{\"ImportId\":\"duration\"}"â€¦
## $ Finished                &lt;chr&gt; "Finished", "{\"ImportId\":\"finished\"}", "True", "Trâ€¦
## $ RecordedDate            &lt;chr&gt; "Recorded Date", "{\"ImportId\":\"recordedDate\",\"timâ€¦
## $ ResponseId              &lt;chr&gt; "Response ID", "{\"ImportId\":\"_recordId\"}", "R_2PbTâ€¦
## $ RecipientLastName       &lt;chr&gt; "Recipient Last Name", "{\"ImportId\":\"recipientLastNâ€¦
## $ RecipientFirstName      &lt;chr&gt; "Recipient First Name", "{\"ImportId\":\"recipientFirsâ€¦
## $ RecipientEmail          &lt;chr&gt; "Recipient Email", "{\"ImportId\":\"recipientEmail\"}"â€¦
## $ ExternalReference       &lt;chr&gt; "External Data Reference", "{\"ImportId\":\"externalDaâ€¦
## $ LocationLatitude        &lt;chr&gt; "Location Latitude", "{\"ImportId\":\"locationLatitudeâ€¦
## $ LocationLongitude       &lt;chr&gt; "Location Longitude", "{\"ImportId\":\"locationLongituâ€¦
## $ DistributionChannel     &lt;chr&gt; "Distribution Channel", "{\"ImportId\":\"distributionCâ€¦
## $ UserLanguage            &lt;chr&gt; "User Language", "{\"ImportId\":\"userLanguage\"}", "Eâ€¦
## $ Q2                      &lt;chr&gt; "I am more of a", "{\"ImportId\":\"QID4\"}", "morning â€¦
## $ Q3                      &lt;chr&gt; "My favorite dessert is", "{\"ImportId\":\"QID2\"}", "â€¦
## $ Q4                      &lt;chr&gt; "Which of the following beverages have you had this weâ€¦
## $ Q5                      &lt;chr&gt; "How many pages were in the last book you read?", "{\"â€¦
## $ Q6                      &lt;chr&gt; "Estimate the number of blueberries in this tub of bluâ€¦
## $ Q7                      &lt;chr&gt; "Below are a list of participants in this workshop. Prâ€¦
```

---
# Let's start cleaning up.

## First, we don't need most of that data

There is a ton of data there that doesn't make sense for us to keep around. 

We will use the '%&gt;%' (pipe) operator and the verb select


```r
WorkshopData %&gt;%
  select(ResponseId,Q2:Q7) -&gt; WorkshopData

glimpse(WorkshopData)
```

```
## Rows: 4
## Columns: 7
## $ ResponseId &lt;chr&gt; "Response ID", "{\"ImportId\":\"_recordId\"}", "R_2PbT59J94Jaqzle",â€¦
## $ Q2         &lt;chr&gt; "I am more of a", "{\"ImportId\":\"QID4\"}", "morning person.", "niâ€¦
## $ Q3         &lt;chr&gt; "My favorite dessert is", "{\"ImportId\":\"QID2\"}", "Brown Butter â€¦
## $ Q4         &lt;chr&gt; "Which of the following beverages have you had this week (select alâ€¦
## $ Q5         &lt;chr&gt; "How many pages were in the last book you read?", "{\"ImportId\":\"â€¦
## $ Q6         &lt;chr&gt; "Estimate the number of blueberries in this tub of blueberries. Pleâ€¦
## $ Q7         &lt;chr&gt; "Below are a list of participants in this workshop. Prior to this wâ€¦
```

???
Note the data are not numbers.
---
# Let's start cleaning up.

## Now we should actually take a look at the data


```r
WorkshopData %&gt;%
  head()
```

```
## # A tibble: 4 x 7
##   ResponseId    Q2       Q3        Q4             Q5        Q6             Q7            
##   &lt;chr&gt;         &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;          &lt;chr&gt;     &lt;chr&gt;          &lt;chr&gt;         
## 1 "Response ID" "I am mâ€¦ "My favoâ€¦ "Which of theâ€¦ "How manâ€¦ "Estimate theâ€¦ "Below are a â€¦
## 2 "{\"ImportIdâ€¦ "{\"Impâ€¦ "{\"Impoâ€¦ "{\"ImportId\â€¦ "{\"Impoâ€¦ "{\"ImportId\â€¦ "{\"ImportId\â€¦
## 3 "R_2PbT59J94â€¦ "morninâ€¦ "Brown Bâ€¦ "Coffee,Fizzyâ€¦ "241"     "503"           &lt;NA&gt;         
## 4 "R_1ImwOPxymâ€¦ "night â€¦ "Ice Creâ€¦ "Fruit Juice,â€¦ "533"     "400"           &lt;NA&gt;
```
--
Hmm, it looks like there are two rows that are not actually data. 

---
# Let's start cleaning up.

## Get rid of the two rows of data that are junk


```r
WorkshopData %&gt;%
  slice(-(1:2))
```

```
## # A tibble: 2 x 7
##   ResponseId     Q2         Q3                   Q4                     Q5    Q6    Q7   
##   &lt;chr&gt;          &lt;chr&gt;      &lt;chr&gt;                &lt;chr&gt;                  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
## 1 R_2PbT59J94Jaâ€¦ morning pâ€¦ Brown Butter Chocolâ€¦ Coffee,Fizzy Water     241   503   &lt;NA&gt; 
## 2 R_1ImwOPxym34â€¦ night owl. Ice Cream            Fruit Juice,Coffee,Waâ€¦ 533   400   &lt;NA&gt;
```

--
### Since this worked, we should now update our dataframe

---
# Let's start cleaning up.

## Get rid of the two rows of data that are junk


```r
WorkshopData %&gt;%
* slice(-(1:2)) -&gt; WorkshopData

WorkshopData
```

```
## # A tibble: 2 x 7
##   ResponseId     Q2         Q3                   Q4                     Q5    Q6    Q7   
##   &lt;chr&gt;          &lt;chr&gt;      &lt;chr&gt;                &lt;chr&gt;                  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
## 1 R_2PbT59J94Jaâ€¦ morning pâ€¦ Brown Butter Chocolâ€¦ Coffee,Fizzy Water     241   503   &lt;NA&gt; 
## 2 R_1ImwOPxym34â€¦ night owl. Ice Cream            Fruit Juice,Coffee,Waâ€¦ 533   400   &lt;NA&gt;
```

--
### Full disclosure I had to google how to do this

---
# Let's check out the power of R

.font200[.center[I am going to blast through these next slides, to show you some of the things that you might want to do with R]]


---
# Let's start visualizing the data

## For categorical data, you might want to get some counts.

Here is code to do this for the question about morning or night person.



```r
WorkshopData %&gt;%
* select(Q2) %&gt;%
* group_by(Q2) %&gt;%
  tally() 
```

```
## # A tibble: 2 x 2
##   Q2                  n
##   &lt;chr&gt;           &lt;int&gt;
## 1 morning person.     1
## 2 night owl.          1
```


---
# Let's start visualizing the data

## For categorical data, you might want to get a histogram.

Here is code to do this for the favorite dessert type.

.pull-left[

```r
WorkshopData %&gt;%
  select(Q3) %&gt;%
  group_by(Q3) %&gt;% 
  tally()  
```

```
## # A tibble: 2 x 2
##   Q3                                      n
##   &lt;chr&gt;                               &lt;int&gt;
## 1 Brown Butter Chocolate Chip Cookies     1
## 2 Ice Cream                               1
```
]
.pull-right[

```r
WorkshopData %&gt;%
  select(Q3) %&gt;%
  ggplot(aes(y = Q3)) + 
  geom_bar()
```

![](RForSNA_WS1_files/figure-html/DessertTypeHist-1.png)&lt;!-- --&gt;
]

---
# Let's look at some quantitative data
.pull-left[
### First, let's summarize the reading data.


```r
WorkshopData %&gt;%
  select(Q5) %&gt;%
  summarize(Ave = mean(Q5), 
            SD = sd(Q5))
```

```
## # A tibble: 1 x 2
##     Ave    SD
##   &lt;dbl&gt; &lt;dbl&gt;
## 1    NA  206.
```
#### If we just run this we get an error message. 
* It is weird that sd will run, but mean will not. 

]

.pull-right[
### Convert to numeric

(mutate is a verb that is really useful!)


```r
WorkshopData %&gt;%
  select(Q5) %&gt;%
* mutate(Q5 = as.numeric(Q5)) %&gt;%
  summarize(Ave = mean(Q5, na.rm = TRUE), 
            SD = sd(Q5, na.rm = TRUE))
```

```
## # A tibble: 1 x 2
##     Ave    SD
##   &lt;dbl&gt; &lt;dbl&gt;
## 1   387  206.
```
]



---
# Let's investigate groups

.pull-left[
### Are morning people or night owls reading longer books?


```r
WorkshopData %&gt;%
  select(Q2, Q5) %&gt;%
  mutate(Q5 = as.numeric(Q5)) %&gt;%
  group_by(Q2) %&gt;%
  summarize(Ave = mean(Q5, na.rm = TRUE), 
            SD = sd(Q5, na.rm = TRUE))
```

```
## # A tibble: 2 x 3
##   Q2                Ave    SD
##   &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt;
## 1 morning person.   241    NA
## 2 night owl.        533    NA
```
]
.pull-right[

### We might want to use a boxplot to display these data


```r
#WorkshopData %&gt;%
#  select(Q2, Q5) %&gt;%
#  mutate(Q5 = as.numeric(Q5)) %&gt;%
#  group_by(Q2) %&gt;%
#  boxplot()
```
]

---
# Let's look at readers vs. blueberries

### Is there a relationship between length of book and estimates on number of blueberries?

.pull-left[
Could do a scatter plot

```r
WorkshopData %&gt;%
  select(Q5:Q6) %&gt;%
  mutate(Q5 = as.numeric(Q5), Q6 = as.numeric(Q6)) %&gt;%
  ggplot(aes(x = Q5, y = Q6)) +
  geom_point()
```

]
.pull-right[
![](RForSNA_WS1_files/figure-html/unnamed-chunk-1-1.png)&lt;!-- --&gt;

]

---
# Let's look at readers vs. blueberries

### Is there a relationship between length of book and estimates on number of blueberries?

### Or you could do a linear model


```r
summary(lm(Q6 ~ Q5, data = WorkshopData))
```

```
## 
## Call:
## lm(formula = Q6 ~ Q5, data = WorkshopData)
## 
## Residuals:
## ALL 2 residuals are 0: no residual degrees of freedom!
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)
## (Intercept)      503         NA      NA       NA
## Q5533           -103         NA      NA       NA
## 
## Residual standard error: NaN on 0 degrees of freedom
## Multiple R-squared:      1,	Adjusted R-squared:    NaN 
## F-statistic:   NaN on 1 and 0 DF,  p-value: NA
```
---
# Let's prep our data for SNA

We will need to prep two separate files...

1. An edgelist
2. A file of attributes of the nodes. 

---
# Let's make an edgelist

### First, take a look at the data


```r
WorkshopData %&gt;%
  select(ResponseId, Q7) %&gt;%
  glimpse()
```

```
## Rows: 2
## Columns: 2
## $ ResponseId &lt;chr&gt; "R_2PbT59J94Jaqzle", "R_1ImwOPxym34BevQ"
## $ Q7         &lt;chr&gt; NA, NA
```

The data are organized so that we have the IDs of the people that are connected separated by commas.  It would be best if we could separate these into separate rows.


---
# Let's make an edgelist

### Separate connection data so we have one row per interaction


```r
WorkshopData %&gt;%
  select(ResponseId, Q7) %&gt;%
  separate_rows(Q7) -&gt; EL

head(EL)
```

```
## # A tibble: 2 x 2
##   ResponseId        Q7   
##   &lt;chr&gt;             &lt;chr&gt;
## 1 R_2PbT59J94Jaqzle &lt;NA&gt; 
## 2 R_1ImwOPxym34BevQ &lt;NA&gt;
```

.font140[
Since I want to use this Edgelist over and over, I will assign it to a new dataframe
] 

---
# Let's make an edgelist

The issue with the edgelist as a data frame is that the command we want to use needs the edgelist to be a matrix. So we need to convert.


```r
EL_M = as.matrix(EL)

dim(EL_M)
```

```
## [1] 2 2
```

---
# Let's assemble our node attributes

Before we can convert our Edgelist to a network, we should add in the attributes. 

We have several candidate attributes:
- Morning vs. Night
- Dessert Type
- Pages in book
- Beverages (But this is much harder to deal with)

We will develop a separate dataframe for the attributes. 


```r
WorkshopData %&gt;%
  select(ResponseId, Q2, Q3, Q5) -&gt; AttributeDf
```


---
# Let's assemble our node attributes

Experience tells me that when you try to add attributes
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
