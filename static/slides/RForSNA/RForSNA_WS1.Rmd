---
title: "R For SNA"
subtitle: Workshop 1
author: 'Eric Brewe <br> Associate Professor of Physics at Drexel University <br>'
date: "4 August 2020, last update: `r Sys.Date()`"
output: 
  xaringan::moon_reader:
    css: [default, metropolis, "BreweSlides.css"]
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(warning = FALSE, message = FALSE)
library(tidyverse) # load tidyverse package
library(emo) # load emoji package
library(igraph)
library(tidygraph)
library(ggraph)

```

# Why shouldn't I just use Excel?

- R is a programming language
  - Data live separate from analysis (this is good)
  - Data are imported, manipulated, represented, but not changed.
    - This means you can't screw up!
--

.center[Or at least it is hard to screw up

#`r emo::ji("doubt")`]

---
# R is good for... 

- Data cleaning
- Plotting
- Summarizing
- Manipulating data
- Reproducibility
- Sharing Code

---
class: center, middle

# Foundations of Network Analysis

---
# What is a network?
.pull-left[
- Collection of *object-like* things that are connected.
    - Nodes/actors = Object-like things (Nouns)
        - Students in a class, Words in a novel, Banks...
        - Nodes can have attributes 
            - Gender, 
            - Word-type,
            - Market capitialization
]


.pull-right[
![NetworkImage](https://cdn.journals.aps.org/journals/PRPER/key_images/10.1103/PhysRevPhysEducRes.15.020150.png)


]
---
# What is a network?
.pull-left[
- Collection of *object-like* things that are connected.
    - Ties/Links/Edges = Connections between nodes (Verbs)
        - Talked to each other, Are neigbors, Lend money, Sent text message...
            - Directional
            - Multiplex
            - Weighted
]


.pull-right[
![NetworkImage](https://cdn.journals.aps.org/journals/PRPER/key_images/10.1103/PhysRevPhysEducRes.15.020150.png)


]
---
# Network Analysis is for the analysis of *relational data*

There are four basic assumptions:

1. Nodes and interactions are interdependent*
2. Edges allow flow between nodes
3. Network models on indiviuals both constrain and provide opportunity for action
4. Network models conceptualize structure as representation of lasting patterns of relations between actors

.footnote[
\* Violates basic assumption of inferential statistics

Wasserman, S., Faust, K. (1994). Social network analysis: Methods and applications (Vol. 8). Cambridge university press.
]
---
# What can we do with it?

.pull-left[
### Ego-Level Analyses

- What can we know about the network of one person?
    - Ego density
    - Number of neighbors
    - Number of connected neighbors
]

.pull-right[

![](img/ParisiEgoNet.png)
]
---

# What can we do with it?

.pull-left[
### Node-Level Analyses

- What can we know about the position of people in a network?
    - Degree (In/Out/Total)
    - Geodesic Distance (Kevin Bacon)
    - PageRank
    - Target Entropy
]

.pull-right[

![](img/PERGraph.png)
]
---

# What can we do with it?

.pull-left[
### Whole Network Analyses

- What can we say about a whole network?
    - Density, Average path length, Giant component
    - Clustering
    - Homophily
    - Modeling
        - Block models
        - Small worldness
]

.pull-right[

![](img/MapEqn.png)]
---


# Historical Foundations

.pull-left[

Joseph Moreno & Helen Hall Jennings (1932)
- Established foundations of SNA

Quantitative Sociology/Anthropology
- Davis Southern Women's Club (1941)
- Small World Problem (1967)
- Zachary's Karate Club (1977)

Seminal Articles
- Milgram, Stanley "The small world problem" Psychology Today 2:1, (1967)
- Grannovetter, Mark S. "The strength of weak ties" American Journal of Sociology (1973)
]

.pull-right[

![](img/JosephMoreno.jpg)]
---
# Modern Foundations of Network Analysis


### Sociophysics (1990s)

- Graph theory
- Information theory
- Computing 
- Used to study
    - Internet
    - Power grid
    - Transportation networks

Seminal Articles
- Watts & Strogratz "Collective dynamics of small world networks" Nature (1998)
- Page, Brin, Motwani, & Winograd "The PageRank citation ranking: Bringing order to the web" Stanford InfoLab (1999)

---

class: center, middle

# Important Takeaways from History



Two main camps

Statistical -> hypothesis testing

Graph theoretic -> network models and simulation
 
--

.large[
They often don't agree.

There is often distain.

They have different language, journals, conferences
]
---
# Network Data in R

.center[
#### Sociomatrix/Adjacency Matrix
]
.pull-left[
```{r ToyNet, echo = FALSE}

set.seed(867)
gr <- erdos.renyi.game(5, 5, type = "gnm")

plot(gr)

A <- as_adjacency_matrix(gr)
```
]

.pull-right[
```{r ToyNetMatrix}
A
```
]

---
# Network Data in R

.center[
#### Edgelist
]
.pull-left[
```{r PlotToyNet, echo = FALSE}

plot(gr)

B = as_adj_edge_list(gr)
```
]

.pull-right[
```{r ToyNetEdgelist}
B
```
]

---


# What does this mean in terms of learning R?

- We need to know something about the different types of data!

.pull-left[

#### Data types (at least some of them)

- **Logical** (T/F, 1/0)
- **Integers** (whole numbers)
- **Numeric** (numbers with decimal places)
- **Complex** (I never use these)
]

.pull-right[
#### Data storage (at least some of them)

- **Vectors** = long columns of data (can be any type, but only one type of data)
- **Dataframes** = like Excel pages (columns can hold different types of data)
- **Matrices** = like dataframes, but they have named rows/columns 
    - Adjacency Matrices are of type matrix.
- **Lists** = the junkdrawer, can hold any type of data (including dataframes or matrices)
    - in igraph, networks are stored as lists.

]
---

## What you need to know about R?

- R is the programming language.
- RStudio is the Integrated Development Environment (IDE)
- Packages: groups of functions that are developed as open source 
- Base R
    - The group of packages preloaded into R
- Tidyverse
    - Family of packages that are designed with the theory that programming should be readable by humans.


.font190[.center[Lets do this!]]


---
# Using R and RStudio

.pull-left[
- Open RStudio (this will automatically open R)
- Navigate to your folder titled "RForSNA"
- In RStudio -> File -> New Project
    - Select "Existing Directory" (Unless you know Git)
- In RStudio -> File -> New File -> RMarkdown
]
.pull-right[
![](img/NewProject.png)
![](img/NewRMarkdown.png)
]
---

# Lets Take a Tour of RStudio IDE

---

# Lets Install Some Packages
.font150[You'll only need to do this once.]

## In Console

To install tidyverse package...

```{r InstallPackages, eval=FALSE}
install.packages("tidyverse")
```

Repeat this with the following packages:

igraph    tidygraph     here     ggraph

To load tidyverse package...

```{r InstallPackages, eval=FALSE}
library(tidyverse)
```
